import{_ as a,a as t,b as n,c,i as s,s as r,d as e,S as o,f as i,g as l,y as u,h as f,j as h,k as d,l as p,m as v,N as m,o as g,n as E,A as b,W as y,C as k,t as x,r as C,u as I,O as T,R as D,z as w,X as $,D as N,I as S,x as _}from"./index.867020a7.js";import{_ as A,a as V}from"./asyncToGenerator.18e9fab6.js";import{C as O}from"./Card.c5e15838.js";function j(a,t,n){var c=Object.create(a);return c.item=t[n],c}function L(a){var t,n,c=a.error.message+"";return{c:function(){t=l("p"),n=u(c),this.h()},l:function(a){t=h(a,"P",{style:!0},!1);var s=d(t);n=f(s,c),s.forEach(p),this.h()},h:function(){S(t,"color","red")},m:function(a,c){g(a,t,c),b(t,n)},p:function(a,t){a.categories&&c!==(c=t.error.message+"")&&k(n,c)},d:function(a){a&&p(t)}}}function B(a){for(var t,n,c,s,r,e,o,m,E,y,k,x,C,I=a.list,T=[],D=0;D<I.length;D+=1)T[D]=P(j(a,I,D));return{c:function(){t=l("table"),n=l("thead"),c=l("tr"),s=l("th"),r=u("Name"),e=i(),o=l("th"),m=u("Description"),E=i(),y=l("th"),k=u("Actions"),x=i(),C=l("tbody");for(var a=0;a<T.length;a+=1)T[a].c();this.h()},l:function(a){t=h(a,"TABLE",{class:!0},!1);var i=d(t);n=h(i,"THEAD",{},!1);var l=d(n);c=h(l,"TR",{},!1);var u=d(c);s=h(u,"TH",{},!1);var v=d(s);r=f(v,"Name"),v.forEach(p),e=f(u,"\n            "),o=h(u,"TH",{},!1);var g=d(o);m=f(g,"Description"),g.forEach(p),E=f(u,"\n            "),y=h(u,"TH",{width:!0},!1);var b=d(y);k=f(b,"Actions"),b.forEach(p),u.forEach(p),l.forEach(p),x=f(i,"\n          "),C=h(i,"TBODY",{},!1);for(var I=d(C),D=0;D<T.length;D+=1)T[D].l(I);I.forEach(p),i.forEach(p),this.h()},h:function(){v(y,"width","100px"),v(t,"class","table is-striped is-hoverable")},m:function(a,i){g(a,t,i),b(t,n),b(n,c),b(c,s),b(s,r),b(c,e),b(c,o),b(o,m),b(c,E),b(c,y),b(y,k),b(t,x),b(t,C);for(var l=0;l<T.length;l+=1)T[l].m(C,null)},p:function(a,t){if(a.categories){I=t.list;for(var n=0;n<I.length;n+=1){var c=j(t,I,n);T[n]?T[n].p(a,c):(T[n]=P(c),T[n].c(),T[n].m(C,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=I.length}},d:function(a){a&&p(t),_(T,a)}}}function P(a){var t,n,c,s,r,e,o,E,y,x,C,I,D,w,$,N,S,_=a.item.name+"",A=a.item.description+"";function V(){return a.click_handler(a)}function O(){return a.click_handler_1(a)}return{c:function(){t=l("tr"),n=l("td"),c=u(_),s=i(),r=l("td"),e=u(A),o=i(),E=l("td"),y=l("a"),x=l("span"),C=l("i"),I=i(),D=l("a"),w=l("span"),$=l("i"),N=i(),this.h()},l:function(a){t=h(a,"TR",{},!1);var i=d(t);n=h(i,"TD",{class:!0},!1);var l=d(n);c=f(l,_),l.forEach(p),s=f(i,"\n                      "),r=h(i,"TD",{class:!0},!1);var u=d(r);e=f(u,A),u.forEach(p),o=f(i,"\n                      "),E=h(i,"TD",{class:!0},!1);var v=d(E);y=h(v,"A",{href:!0},!1);var m=d(y);x=h(m,"SPAN",{class:!0},!1);var g=d(x);C=h(g,"I",{class:!0},!1),d(C).forEach(p),g.forEach(p),m.forEach(p),I=f(v,"\n\n                          "),D=h(v,"A",{href:!0},!1);var b=d(D);w=h(b,"SPAN",{class:!0},!1);var k=d(w);$=h(k,"I",{class:!0},!1),d($).forEach(p),k.forEach(p),b.forEach(p),v.forEach(p),N=f(i,"\n                  "),i.forEach(p),this.h()},h:function(){v(n,"class","col-name"),v(r,"class","col-description"),v(C,"class","fas fa-edit"),v(x,"class","icon is-small"),v(y,"href","javascript:;"),v($,"class","fas fa-trash"),v(w,"class","icon is-large"),v(D,"href","javascript:;"),v(E,"class","col-action"),S=[m(y,"click",V),m(D,"click",O)]},m:function(a,i){g(a,t,i),b(t,n),b(n,c),b(t,s),b(t,r),b(r,e),b(t,o),b(t,E),b(E,y),b(y,x),b(x,C),b(E,I),b(E,D),b(D,w),b(w,$),b(t,N)},p:function(t,n){a=n,t.categories&&_!==(_=a.item.name+"")&&k(c,_),t.categories&&A!==(A=a.item.description+"")&&k(e,A)},d:function(a){a&&p(t),T(S)}}}function R(a){var t,n;return{c:function(){t=l("progress"),n=u("15%"),this.h()},l:function(a){t=h(a,"PROGRESS",{class:!0,max:!0},!1);var c=d(t);n=f(c,"15%"),c.forEach(p),this.h()},h:function(){v(t,"class","progress is-small is-primary"),v(t,"max","100")},m:function(a,c){g(a,t,c),b(t,n)},p:w,d:function(a){a&&p(t)}}}function H(a){var t,n,c;return{c:function(){t=l("a"),n=u("New"),this.h()},l:function(a){t=h(a,"A",{href:!0,slot:!0,class:!0},!1);var c=d(t);n=f(c,"New"),c.forEach(p),this.h()},h:function(){v(t,"href","javascript:;"),v(t,"slot","footer"),v(t,"class","card-footer-item"),c=m(t,"click",a.onNewClick)},m:function(a,c){g(a,t,c),b(t,n)},p:w,d:function(a){a&&p(t),c()}}}function U(a){var t,n,c,s={ctx:a,current:null,token:null,pending:R,then:B,catch:L,value:"list",error:"error"};return $(n=a.categories,s),{c:function(){t=l("div"),s.block.c(),c=i()},l:function(a){t=h(a,"DIV",{},!1);var n=d(t);s.block.l(n),n.forEach(p),c=f(a,"\n    ")},m:function(a,n){g(a,t,n),s.block.m(t,s.anchor=null),s.mount=function(){return t},s.anchor=null,g(a,c,n)},p:function(t,c){a=c,s.ctx=a,"categories"in t&&n!==(n=a.categories)&&$(n,s)||s.block.p(t,N(N({},a),s.resolved))},d:function(a){a&&p(t),s.block.d(),s.token=null,s=null,a&&p(c)}}}function M(a){var t,n,c,s,r,e,o,D,w,$,N,S,_,A,V,j,L,B,P,R,M,G,z,F,W,X,Y,q,J,K,Q,Z,aa,ta,na,ca=a.category.name+"",sa=new O({props:{title:"Categories",$$slots:{default:[U],footer:[H]},$$scope:{ctx:a}}});return{c:function(){t=i(),sa.$$.fragment.c(),n=i(),c=l("div"),s=l("div"),r=i(),e=l("div"),o=l("header"),D=l("p"),w=u(ca),$=i(),N=l("button"),S=i(),_=l("section"),A=l("div"),V=l("label"),j=u("Name"),L=i(),B=l("div"),P=l("input"),R=i(),M=l("div"),G=l("label"),z=u("Description"),F=i(),W=l("div"),X=l("input"),Y=i(),q=l("footer"),J=l("button"),K=u("Save changes"),Q=i(),Z=l("button"),aa=u("Cancel"),this.h()},l:function(a){t=f(a,"\n\n\n\n"),sa.$$.fragment.l(a),n=f(a,"\n\n"),c=h(a,"DIV",{class:!0},!1);var i=d(c);s=h(i,"DIV",{class:!0},!1),d(s).forEach(p),r=f(i,"\n    "),e=h(i,"DIV",{class:!0},!1);var l=d(e);o=h(l,"HEADER",{class:!0},!1);var u=d(o);D=h(u,"P",{class:!0},!1);var v=d(D);w=f(v,ca),v.forEach(p),$=f(u,"\n            "),N=h(u,"BUTTON",{class:!0,"aria-label":!0},!1),d(N).forEach(p),u.forEach(p),S=f(l,"\n        "),_=h(l,"SECTION",{class:!0},!1);var m=d(_);A=h(m,"DIV",{class:!0},!1);var g=d(A);V=h(g,"LABEL",{class:!0},!1);var E=d(V);j=f(E,"Name"),E.forEach(p),L=f(g,"\n                "),B=h(g,"DIV",{class:!0},!1);var b=d(B);P=h(b,"INPUT",{class:!0,type:!0,placeholder:!0},!1),d(P).forEach(p),b.forEach(p),g.forEach(p),R=f(m,"\n          "),M=h(m,"DIV",{class:!0},!1);var y=d(M);G=h(y,"LABEL",{class:!0},!1);var k=d(G);z=f(k,"Description"),k.forEach(p),F=f(y,"\n            "),W=h(y,"DIV",{class:!0},!1);var x=d(W);X=h(x,"INPUT",{class:!0,type:!0,placeholder:!0},!1),d(X).forEach(p),x.forEach(p),y.forEach(p),m.forEach(p),Y=f(l,"\n        "),q=h(l,"FOOTER",{class:!0},!1);var C=d(q);J=h(C,"BUTTON",{class:!0},!1);var I=d(J);K=f(I,"Save changes"),I.forEach(p),Q=f(C,"\n            "),Z=h(C,"BUTTON",{class:!0},!1);var T=d(Z);aa=f(T,"Cancel"),T.forEach(p),C.forEach(p),l.forEach(p),i.forEach(p),this.h()},h:function(){document.title="Categories",v(s,"class","modal-background"),v(D,"class","modal-card-title"),v(N,"class","delete"),v(N,"aria-label","close"),v(o,"class","modal-card-head"),v(V,"class","label"),v(P,"class","input"),v(P,"type","text"),v(P,"placeholder",""),v(B,"class","control"),v(A,"class","field"),v(G,"class","label"),v(X,"class","input"),v(X,"type","text"),v(X,"placeholder",""),v(W,"class","control"),v(M,"class","field"),v(_,"class","modal-card-body"),v(J,"class",a.buttonSaveClass),v(Z,"class","button"),v(q,"class","modal-card-foot"),v(e,"class","modal-card"),v(c,"class",a.modalClass),na=[m(N,"click",a.closeModal),m(P,"input",a.input0_input_handler),m(X,"input",a.input1_input_handler),m(J,"click",a.save),m(Z,"click",a.closeModal)]},m:function(i,l){g(i,t,l),E(sa,i,l),g(i,n,l),g(i,c,l),b(c,s),b(c,r),b(c,e),b(e,o),b(o,D),b(D,w),b(o,$),b(o,N),b(e,S),b(e,_),b(_,A),b(A,V),b(V,j),b(A,L),b(A,B),b(B,P),y(P,a.category.name),b(_,R),b(_,M),b(M,G),b(G,z),b(M,F),b(M,W),b(W,X),y(X,a.category.description),b(e,Y),b(e,q),b(q,J),b(J,K),b(q,Q),b(q,Z),b(Z,aa),ta=!0},p:function(a,t){var n={};(a.$$scope||a.categories)&&(n.$$scope={changed:a,ctx:t}),sa.$set(n),ta&&!a.category||ca===(ca=t.category.name+"")||k(w,ca),a.category&&P.value!==t.category.name&&y(P,t.category.name),a.category&&X.value!==t.category.description&&y(X,t.category.description),ta&&!a.buttonSaveClass||v(J,"class",t.buttonSaveClass),ta&&!a.modalClass||v(c,"class",t.modalClass)},i:function(a){ta||(x(sa.$$.fragment,a),ta=!0)},o:function(a){C(sa.$$.fragment,a),ta=!1},d:function(a){a&&p(t),I(sa,a),a&&(p(n),p(c)),T(na)}}}function G(){return z.apply(this,arguments)}function z(){return(z=A(V.mark(function a(){var t;return V.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://northwind.now.sh/api/categories");case 2:if(!(t=a.sent).ok){a.next=5;break}return a.abrupt("return",t.json());case 5:throw new Error("ðŸš¨ Catastrofic failure ðŸš¨ ".concat(t.status," ").concat(t.statusText));case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}function F(a,t,n){var c,s,r=[],e={},o=!1,i=!1;function l(a){n("category",e=a),d()}function u(a){return f.apply(this,arguments)}function f(){return(f=A(V.mark(function a(t){return V.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n("category",e=t),!confirm('Delete "'.concat(e.name,'"?'))){a.next=5;break}return a.next=4,http.delete("/categories/".concat(e.id));case 4:n("categories",r=G());case 5:case"end":return a.stop()}},a)}))).apply(this,arguments)}function h(){n("modalIsVisible",i=!1)}function d(){n("modalIsVisible",i=!0)}function p(){return(p=A(V.mark(function a(){return V.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n("buttonSaveIsLoading",o=!0),a.next=4,http({method:e.id?"put":"post",url:e.id?"/categories/".concat(e.id):"/categories",data:e});case 4:a.sent,n("categories",r=G()),h(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:return a.prev=12,n("buttonSaveIsLoading",o=!1),a.finish(12);case 15:case"end":return a.stop()}},a,null,[[0,9,12,15]])}))).apply(this,arguments)}return D(A(V.mark(function a(){return V.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n("categories",r=G());case 1:case"end":return a.stop()}},a)}))),a.$$.update=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{buttonSaveIsLoading:1,modalIsVisible:1};a.buttonSaveIsLoading&&n("buttonSaveClass",c=!0===o?"button is-success is-loading":"button is-success"),a.modalIsVisible&&n("modalClass",s=!0===i?"modal is-active":"modal")},{categories:r,category:e,onItemClick:l,onDeleteClick:u,closeModal:h,onNewClick:function(){n("category",e={name:"",description:""}),d()},save:function(){return p.apply(this,arguments)},buttonSaveClass:c,modalClass:s,click_handler:function(a){return l(a.item)},click_handler_1:function(a){return u(a.item)},input0_input_handler:function(){e.name=this.value,n("category",e)},input1_input_handler:function(){e.description=this.value,n("category",e)}}}export default(function(i){function l(a){var o;return t(this,l),o=n(this,c(l).call(this)),s(e(o),a,F,M,r,[]),o}return a(l,o),l}());
